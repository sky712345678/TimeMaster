<!doctype html>
<html>
    <title>所有活動紀錄</title>

    <link rel="stylesheet" href="/static/records/record_listAll_css.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <body onload="setInfo()">
        <a href="/home" title="go to Homepage">&lt; 回首頁</a>
        {% block flashMessage %}
            {% with messages = get_flashed_messages() %}
            <div class="messageContainer">
                {% for message in messages %}
                - {{ message }}
                {% endfor %}
            </div>
            {% endwith %}
        {% endblock %}
        
        <div id="recordListContainer">
            <h1 class="recordListContainer">查看所有活動紀錄</h1>
            
            {% for rl in records %}
            <div class="intervalContainer">
                <h2 class="interval">{{bound[loop.index0][0]}} - {{bound[loop.index0][1]}}</h2>
                <h4 class="summary">
                    {{summary[loop.index0][0].Category}}: {{summary[loop.index0][0].Total}} 分鐘
                    {% for s in summary[loop.index0][1:] %}
                 | {{s.Category}}: {{s.Total}} 分鐘
                    {% endfor %}
                </h4>
                {% for r in rl %}
                <div class="recordContainer">
                    <hr>
                    <div class="recordTitleContainer">
                    {% if r.Category == 'Learning' %}
                        <h3 class="item">{{r.Name}} ({{r.ItemNumber}}) | {{r.Duration}} 分鐘</h3>
                    {% else %}
                        <h3 class="item">{{r.Name}} | {{r.Duration}} 分鐘</h3>
                    {% endif %}
                    </div>
                    <div class="buttonContainer">
                        <button class="modifyRequestButton" onclick="sendModifyRequest('{{r.ItemNumber}}', '{{r.Date}}', '{{r.SetDateTime}}')"><i class="fa fa-edit"></i></button>
                        <button class="deleteRequestButton" onclick="deleteWarn('{{r.ItemNumber}}', '{{r.Date}}', '{{r.SetDateTime}}')"><i class="fa fa-trash"></i></button>
                    </div>
                    {% if r.Goal != None %}
                        <div class="recordInfoContainer">
                            <p class="goalTitle">目標</p>
                            <p class="goal">{{r.Goal}} ({{r.AchievePercentage}}%)</p>
                        </div>
                    {% endif %}
                    {% if r.Description != '' %}
                        <div class="recordInfoContainer">
                            <p class="descriptionTitle">備註</p>
                            <p class="description">{{r.Description}}</p>
                        </div>
                    {% endif %}
                    {% if r.Category == 'Learning' %}
                        <p class="categoryAndDate"><i class="fa fa-book"></i> 學習 | {{r.Date}}</p>
                    {% elif r.Category == 'Sports' %}
                        <p class="categoryAndDate"><i class="fa fa-soccer-ball-o"></i> 運動 | {{r.Date}}</p>
                    {% else %}
                        <p class="categoryAndDate"><i class="fa fa-gamepad"></i> 休閒 | {{r.Date}}</p>
                    {% endif %}
                    <br>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        <div id="modifyRequestContainer" style="display: none;"></div>
        <div id="deleteRequestContainer" style="display: none;"></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="/static/records/record_listAll_js.js"></script>
    </body>
</html>